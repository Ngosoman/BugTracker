{% extends 'base.html' %}

{% block content %}
<div class="row">
    <div class="col-md-12">
        <h2 class="text-dark mb-4">
            <i class="bi bi-graph-up"></i> Analysis Results: {{ snippet.title }}
        </h2>
        <div class="alert alert-info">
            Found {{ issues_count }} issue{{ issues_count|pluralize }} in your code
        </div>
    </div>
</div>

<div class="row">
    <div class="col-md-6">
        <div class="card">
            <div class="card-header bg-primary text-white">
                <h5 class="mb-0"><i class="bi bi-code-slash"></i> Your Code</h5>
            </div>
            <div class="card-body">
                <pre style="background: #f8f9fa; padding: 15px; border-radius: 5px; max-height: 400px; overflow: auto;">
<code>{{ snippet.code }}</code></pre>
            </div>
        </div>
    </div>
    
    <div class="col-md-6">
        <div class="card">
            <div class="card-header bg-success text-white">
                <h5 class="mb-0"><i class="bi bi-bug"></i> Issues Found</h5>
            </div>
            <div class="card-body">
                {% if issues %}
                    {% for issue in issues %}
                    <div class="alert alert-{% if issue.severity == 'critical' %}danger{% elif issue.severity == 'high' %}warning{% else %}info{% endif %}">
                        <h6>Line {{ issue.line_number }}: {{ issue.issue_type }}</h6>
                        <p class="mb-1">{{ issue.description }}</p>
                        <small class="text-muted">Suggested fix: {{ issue.suggested_fix }}</small>
                    </div>
                    {% endfor %}
                {% else %}
                    <div class="alert alert-success">
                        <i class="bi bi-check-circle"></i> No issues found! Your code looks good.
                    </div>
                {% endif %}
            </div>
        </div>
    </div>
</div>

<div class="row mt-4">
    <div class="col-12">
        <div class="d-grid gap-2 d-md-flex justify-content-md-center">
            <a href="{% url 'paste_code' %}" class="btn btn-info me-md-2">
                <i class="bi bi-code-slash"></i> Analyze More Code
            </a>
            <a href="{% url 'dashboard' %}" class="btn btn-primary">
                <i class="bi bi-speedometer2"></i> Back to Dashboard
            </a>
        </div>
    </div>
</div>
{% endblock %}